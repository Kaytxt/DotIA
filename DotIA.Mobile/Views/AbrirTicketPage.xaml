<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="DotIA.Mobile.Views.AbrirTicketPage"
             xmlns:viewmodels="clr-namespace:DotIA.Mobile.ViewModels"
             x:DataType="viewmodels:AbrirTicketViewModel"
             Title="Abrir Ticket Direto"
             BackgroundColor="{StaticResource Background}">

    <Grid RowDefinitions="Auto,*,Auto" Padding="20">

        <!-- Header com informaÃ§Ã£o -->
        <Border Grid.Row="0"
                Padding="15"
                Margin="0,0,0,20"
                StrokeThickness="0">
            <Border.Background>
                <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                    <GradientStop Color="{StaticResource Primary}" Offset="0.0" />
                    <GradientStop Color="{StaticResource Secondary}" Offset="1.0" />
                </LinearGradientBrush>
            </Border.Background>
            <Border.StrokeShape>
                <RoundRectangle CornerRadius="15"/>
            </Border.StrokeShape>
            <VerticalStackLayout Spacing="5">
                <Label Text="ðŸ’¡ Precisa de ajuda urgente?"
                       TextColor="White"
                       FontSize="16"
                       FontAttributes="Bold"/>
                <Label Text="Abra um ticket diretamente com um tÃ©cnico sem passar pela IA."
                       TextColor="White"
                       FontSize="13"
                       Opacity="0.9"/>
            </VerticalStackLayout>
        </Border>

        <!-- FormulÃ¡rio -->
        <ScrollView Grid.Row="1">
            <VerticalStackLayout Spacing="20">

                <!-- TÃ­tulo -->
                <VerticalStackLayout Spacing="8">
                    <Label Text="ðŸ“Œ TÃ­tulo do Problema"
                           TextColor="White"
                           FontSize="15"
                           FontAttributes="Bold"/>
                    <Border BackgroundColor="{StaticResource BackgroundDark}"
                            Stroke="{StaticResource BorderColor}"
                            StrokeThickness="2"
                            Padding="15,12">
                        <Border.StrokeShape>
                            <RoundRectangle CornerRadius="15"/>
                        </Border.StrokeShape>
                        <Entry Placeholder="Ex: Problema com impressora"
                               PlaceholderColor="#64748b"
                               TextColor="White"
                               Text="{Binding Titulo}"
                               BackgroundColor="Transparent"
                               MaxLength="100"
                               FontSize="15"/>
                    </Border>
                    <Label Text="DÃª um tÃ­tulo breve e descritivo (mÃ­nimo 5 caracteres)"
                           TextColor="#94a3b8"
                           FontSize="12"/>
                </VerticalStackLayout>

                <!-- DescriÃ§Ã£o -->
                <VerticalStackLayout Spacing="8">
                    <Label Text="ðŸ“ DescriÃ§Ã£o Detalhada"
                           TextColor="White"
                           FontSize="15"
                           FontAttributes="Bold"/>
                    <Border BackgroundColor="{StaticResource BackgroundDark}"
                            Stroke="{StaticResource BorderColor}"
                            StrokeThickness="2"
                            Padding="15,12">
                        <Border.StrokeShape>
                            <RoundRectangle CornerRadius="15"/>
                        </Border.StrokeShape>
                        <Editor Placeholder="Descreva seu problema em detalhes...&#x0a;&#x0a;Exemplo:&#x0a;- O que aconteceu?&#x0a;- Quando comeÃ§ou?&#x0a;- JÃ¡ tentou alguma soluÃ§Ã£o?"
                                PlaceholderColor="#64748b"
                                TextColor="White"
                                Text="{Binding Descricao}"
                                BackgroundColor="Transparent"
                                HeightRequest="200"
                                FontSize="15"
                                AutoSize="TextChanges"/>
                    </Border>
                    <Label Text="Quanto mais detalhes, mais rÃ¡pido o tÃ©cnico poderÃ¡ ajudar! (mÃ­nimo 20 caracteres)"
                           TextColor="#94a3b8"
                           FontSize="12"/>
                </VerticalStackLayout>

            </VerticalStackLayout>
        </ScrollView>

        <!-- BotÃµes -->
        <Grid Grid.Row="2"
              ColumnDefinitions="*,*"
              ColumnSpacing="10"
              Margin="0,20,0,0">

            <!-- Cancelar -->
            <Border Grid.Column="0"
                    BackgroundColor="#475569"
                    Stroke="Transparent">
                <Border.StrokeShape>
                    <RoundRectangle CornerRadius="12"/>
                </Border.StrokeShape>
                <Button Text="Cancelar"
                        TextColor="White"
                        BackgroundColor="Transparent"
                        FontSize="16"
                        FontAttributes="Bold"
                        Command="{Binding CancelarCommand}"
                        HeightRequest="50"/>
            </Border>

            <!-- Enviar -->
            <Border Grid.Column="1"
                    BackgroundColor="#7c3aed"
                    Stroke="Transparent">
                <Border.StrokeShape>
                    <RoundRectangle CornerRadius="12"/>
                </Border.StrokeShape>
                <Button Text="ðŸŽ« Abrir Ticket"
                        TextColor="White"
                        BackgroundColor="Transparent"
                        FontSize="16"
                        FontAttributes="Bold"
                        Command="{Binding EnviarCommand}"
                        IsEnabled="{Binding IsEnviando, Converter={StaticResource InvertedBoolConverter}}"
                        HeightRequest="50"/>
            </Border>
        </Grid>

    </Grid>
</ContentPage>
